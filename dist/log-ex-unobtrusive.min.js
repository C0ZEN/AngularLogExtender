/**
 * Log Unobtrusive Extension v0.0.9-sha.6af91f7
 *
 * Used within AngularJS to enhance functionality within the AngularJS $log service.
 *
 * @original-author  Thomas Burleson
 * @contributor Layton Whiteley
 * @contributor A confused individual <ferronrsmith@gmail.com>
 * @website http://www.theSolutionOptimist.com
 * (c) 2014 https://github.com/lwhiteley/AngularLogExtender
 * License: MIT
 *
 * Modifications made by @contributor Layton Whiteley:
 * - Modified to be a full stand-alone Angular Application for reuse
 * - Has global and feature level activation/disabling for $log
 * - Supported sensitive field filtering
 * - Created and tested with AngularJS versions : 1.0.4, 1.1.0, 1.2.25, 1.3.0-rc.2
 */
angular.module("log.ex.uo",[]).provider("logEx",["$provide",function(n){var r=angular.injector(["ng"]),e=r.get("$filter"),t=!1,o=!1,i=!1,a=null,u=navigator.userAgent,l=["log","info","warn","debug","error","getInstance"],g=["chrome","firefox"],s=!0,c=["color","background","font-size","border"],f="[FILTERED]",h={filterString:f,logFilters:[]},d={log:"color: green;",info:"color: blue",warn:"color: #CC9933;",debug:"color: brown;",error:"color: red;"},L=l,v={interval:3e3,enable:!1,api:"",methods:["error"]},b=function(n){var r=" >> ",t="MMM-dd-yyyy-h:mm:ssa",o=e("date")(new Date,t);return""+o+("string"!==p(n)?"":"::"+n)+r},p=function(n){return Object.prototype.toString.call(n).replace(/(\[|object|\s|\])/g,"").toLowerCase()},E=function(n){return/(object|array)/.test(p(n))},y=function(n){return"string"===p(n)?n.replace(/^\s*/,"").replace(/\s*$/,""):""},x=function(n){return"boolean"===p(n)},F=function(n){return"string"===p(n)&&""!==y(n)},P=function(n,r){return"string"===p(n)&&"string"===p(r)&&-1!==r.toLowerCase().indexOf(n.toLowerCase())?!0:!1},A=function(n){var r="";return r=!i&&o?a(n):b(n)},D=function(){for(var n=0;g.length>n;n++)if(P(g[n],u))return!0;return!1},I=D(),w=function(n){return 1===n.length&&"string"===p(n[0])},C=function(n){for(var r=0;c.length>r;r++)if(P(c[r],n))return!0;return!1},O=function(n){return"string"===p(n)&&P(":",n)&&y(n).length>6&&C(n)},m=function(n,r,e){e="string"===p(e)?e:"";var t=I&&O(r)&&"string"===p(n),o=t?""+e+n:n;return t?["%c"+o,r]:[o]},G=function(n,r){return x(n)&&n&&2===r.length},M=function(n,r,e){var t="string"!==p(n)&&"object"!==p(r),o="string"!==p(n)||"object"!==p(r);return t||o?Array.prototype.slice.call(arguments):(e="regexp"===p(e)?e:/\{([^\{\}]*)\}/g,n.replace(e,function(n,e){var t=e.split("."),o=r;try{angular.forEach(t,function(n,r){o=o[t[r]]})}catch(i){o=n}return"string"===p(o)||"number"===p(o)?o:n}))},S=function(n){return E(n)&&h.logFilters.length>0?(angular.forEach(n,function(r,e){angular.forEach(h.logFilters,function(t){"object"===p(r)&&r.hasOwnProperty(t)&&!E(r[t])?r[t]=h.filterString:E(r)&&(n[e]=S(r))})}),n):n};n.decorator("$log",["$delegate",function(n){var r=function(){var n=function(n){return x(n)},r=function(n){return n!==!1},e=function(n,r){return x(n)&&x(r)?r:!1},t=function(n,r,e,t,o){var i=F(t)?t:"this instance";!o&&r&&e?n.log(A()+"[OVERRIDE] LOGGING ENABLED - $log enabled for "+i):o&&r&&!e&&n.log(A()+"[OVERRIDE] LOGGING DISABLED - $log disabled for "+i)},o=function(n){var r={};return angular.isArray(n)&&(r={getInstance:angular.noop},angular.forEach(n,function(n){r[n]=angular.noop})),r},i=function(n,r,e,t){var i={},a=o(r);return angular.forEach(l,function(r){var o;if(angular.isDefined(t)){var u=[];angular.copy(t,u),u.unshift(n[r]),I&&s&&(u[5]=O(u[5])?u[5]:d[r]),o=e.apply(null,u)}else o=n[r];i[r]=angular.isUndefined(a[r])?angular.noop:o}),i},a=function(o){var a=function(n,r,t,o,i,a){var u=function(){var u=o?e(g,t):g;if(u){var l=Array.prototype.slice.call(arguments);h.logFilters.length>0&&(l=S(l));var s=A(r);if(G(i,l)){var c=M.apply(null,l);c="string"===p(c)?[c]:c,l=c}"string"===p(a)&&w(l)?l=m(l[0],a,s):l.unshift(s),n&&n.apply(null,l)}};return u.logs=[],u},u=i(o,L),l=function(e,o,l,s){x(e)?(o=e,e=null):e="string"===p(e)?y(e):null;var c=n(o);return o=r(o),t(u,c,o,e,g),i(u,L,a,[e,o,c,l,s])},g=!1;return angular.extend(o,i(o,L,a,[null,!1,!1,!1,null])),o.getInstance=l,o.enableLog=function(n){g=n},o.logEnabled=function(){return g},o},u=function(n){return i(n,L)};this.enhanceLogger=a,this.exposeSafeLog=u},e=new r;return e.enhanceLogger(n),n.enableLog(t),n.logEnabled()&&n.log("CONFIG: LOGGING ENABLED GLOBALLY"),e.exposeSafeLog(n)}]);var j=function(n){t=x(n)?n:!1},$=function(n){angular.isArray(n)&&(L=n)},N=function(n){angular.isFunction(n)&&(a=n,o=!0)},R=function(n){s=!(x(n)&&n)},B=function(n,r){"string"===p(n)&&d.hasOwnProperty(n)&&O(r)&&(d[n]=r)},U=function(n){"object"===p(n)&&angular.forEach(n,function(n,r){B(r,n)})},V=function(n){angular.isUndefined(n)?i=!0:x(n)&&(i=n)},k=function(n){angular.isUndefined(n)?v.enable=!0:x(n)&&(v.enable=n)},z=function(n){"array"===p(n)&&(v.methods=n)},T=function(n){"number"===p(n)&&(v.interval=n)},Y=function(n){"string"===p(n)&&(v.api=n)},q=function(n){"object"===p(n)&&"array"===p(n.logFilters)&&n.logFilters.length>0&&(angular.forEach(n.logFilters,function(n){"string"===p(n)&&0>h.logFilters.indexOf(n)&&h.logFilters.push(n)}),h.filterString="string"!==p(n.filterString)?f:n.filterString)};this.$get=function(){return{name:"Log Unobtrusive Extension",version:"0.0.9-sha.6af91f7",enableLogging:j,restrictLogMethods:$,overrideLogPrefix:N,disableDefaultColors:R,setLogMethodColor:B,overrideLogMethodColors:U,useDefaultLogPrefix:V,enableLogPushService:k,setAllowedLogPushMethods:z,setLogPushApi:Y,setLogPushInterval:T,configureLogFilters:q}},this.enableLogging=j,this.overrideLogPrefix=N,this.restrictLogMethods=$,this.disableDefaultColors=R,this.setLogMethodColor=B,this.overrideLogMethodColors=U,this.useDefaultLogPrefix=V,this.enableLogPushService=k,this.setAllowedLogPushMethods=z,this.setLogPushApi=Y,this.setLogPushInterval=T,this.configureLogFilters=q}]);